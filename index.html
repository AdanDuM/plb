<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Programming Languages Benchmarks</title>
<link rel="stylesheet" href="sortable.css" />
<script type="text/javascript" src="sortable.js"></script>
</head>
<body>
<div id="wrapper">
<h1>Overview</h1><br>
<table cellpadding="0" cellspacing="0" border="0" class="sortable">
<tr></tr>
<tr><th>Philosophy<td>1) Benchmark language implementations, not individual programs (simple tasks with few pitfalls).<br>
2) Benchmark one language a time, not a mixture of languages (no non-standard libraries in other languages; no language extension).<br>
</tr>
<tr><th>CPU<td>Intel(R) Xeon(R) CPU  E5440  @ 2.83GHz</tr>
<tr><th>Memory<td>16GB</tr>
<tr><th>OS<td>Debian GNU/Linux 5.0</tr>
<tr><th>Source code<td><a class="link" href="https://github.com/attractivechaos/plb">https://github.com/attractivechaos/plb</a></tr>
</table>
<br>
<h1>Benchmarks</h1><br>
<table cellpadding="0" cellspacing="0" border="0" class="sortable">
<tr></tr>
<tr><th>sudoku:t<td>CPU time in seconds for solving 20x50 <a href="http://en.wikipedia.org/wiki/Sudoku">Sudokus</a>
	(<a href="https://github.com/attractivechaos/plb/blob/master/sudoku/sudoku.txt">20 extremely hard Sudokus</a> repeated 50 times) using an algorithm adapted from <a href="http://magictour.free.fr/sudoku.htm">suexco</a>. This
	algorithm is not the fastest, but it is very easy to reimplement.
	Note that "sudoku" and "matmul" evaluate the performance of the language itself. "Patmch" and "dict" below effectively evaluate the performance
	of libraries.</tr>
<tr><th>matmul:t<td>CPU time in seconds for multiplying two 1000x1000 matrics using the standard cubic-time algorithm.
	This benchmark evaluates the performance of nested loops with
	a simple inner loop, which is frequent in scientific computing.</tr>
<tr><th>matmul:m<td>Memory in megabytes for multiplying two 1000x1000 matrics using the standard cubic-time algorithm.</tr>
<tr><th>patmch:1t<td>CPU seconds for finding lines
	matching regexp "([a-zA-Z][a-zA-Z0-9]*)://([^ /]+)(/?[^ ]*)" in <a href="http://people.unipmn.it/manzini/lightweight/corpus/howto.bz2">this file</a>.
	This benchmark evaluates the performance of regex matching common in the context of biological sequence analyses. The uncompressed text file
	is copied to /dev/shm to avoid I/O overhead. For C, reading the input file line by line with fgets() takes 0.1 CPU second.</tr>
<tr><th>patmch:2t<td>CPU seconds for finding lines
	matching "([a-zA-Z][a-zA-Z0-9]*)://([^ /]+)(/?[^ ]*)|([^ @]+)@([^ @]+)" in <a href="http://people.unipmn.it/manzini/lightweight/corpus/howto.bz2">this file</a>.
	This benchmark evaluates the performance given the "|" regex operator which is known to hurt back-tracking based regex matching algorithms.</tr>
<tr><th>dict:t<td>CPU seconds for counting the occurrence of each distinct string among 5 million strings. The average occurrence is 4. This benchmark
	evaluates the efficiency of associative arrays. The strings are generated by
	<a class="link" href="https://github.com/attractivechaos/plb/blob/master/ext/genint.c">this program</a>. For C, reading
	the input file line by line takes 0.3 CPU second.</tr>
<tr><th>dict:m<td>Memory in megabytes for counting the occurrence of each distinct string among 5 million strings.</tr>
</table>
<br>
<h1>Results</h1><br>
<table cellpadding="0" cellspacing="0" border="0" class="sortable" id="sorter">
	<tr><th>Implementation              <th>Lang      <th>sudoku:t<th>matmul:t<th>matmul:m<th>patmch:1t<th>patmch:2t<th>dict:t<th>dict:m</tr>
	<tr><th>ICC-12.0.3                  <td>C         <td>1.0  <td>1.8  <td>31.8 <td>  1.6<td>  4.1<td>  3.0<td> 52.6</tr>
	<tr><th>GCC-4.3.2                   <td>C         <td>1.0  <td>2.3  <td>31.7 <td>  1.7<td>  4.5<td>  3.0<td> 52.6</tr>
	<tr><th>Clang@LLVM-2.9              <td>C         <td>1.0  <td>2.3  <td>31.7 <td>  1.8<td>  4.1<td>  3.0<td> 52.6</tr>
	<tr><th>Java@JRE-1.6.0_25           <td>Java      <td>1.7  <td>2.6  <td>67.1 <td>  6.8<td> 13.4<td>  6.7<td>314.8</tr>
	<tr><th>C#@Mono-2.10.1              <td>C#        <td>3.8  <td>8.9  <td>40.6 <td> 15.7<td> 45.1<td>  5.2<td>113.9</tr>
	<tr><th>6g-20110424                 <td>Go        <td>2.3  <td>3.1  <td>38.2 <td> 21.4<td> 56.1<td>  4.7<td>154.5</tr>
	<tr><th>GDC-0.24                    <td>D         <td>999.9<td>8.5  <td>33.9 <td>999.9<td>999.9<td>  3.2<td> 92.4</tr>
	<tr><th>LDC-20110428@LLVM-2.9       <td>D         <td>1.1  <td>2.4  <td>31.4 <td>999.9<td>999.9<td>999.9<td>999.9</tr>
	<tr><th>V8-r7677                    <td>Javascript<td>4.0  <td>17.2 <td>141.6<td>  1.8<td>  2.9<td>  6.6<td> 97.3</tr>
	<tr><th>JaegarMonkey-a95d42642281   <td>Javascript<td>48.8 <td>77.5 <td>35.9 <td>  1.9<td>  2.8<td>  9.8<td>274.2</tr>
<!--	<tr><th>Rhino-1.7r2@JRE-1.6.0_14    <td>Javascript<td>79.9 <td>567.8<td>999.9<td>999.9<td>999.9<td>999.9</tr>-->
	<tr><th>LuaJIT-2.0.0-beta7 (JIT-on) <td>Lua       <td>6.8  <td>2.7  <td>33.2 <td>  5.6<td>999.9<td>  4.5<td>123.7</tr>
	<tr><th>LuaJIT-2.0.0-beta7 (JIT-off)<td>Lua       <td>16.2 <td>20.8 <td>33.0 <td>  5.6<td>999.9<td>  4.6<td>123.6</tr>
	<tr><th>llvm-lua-1.3.1@LLVM-2.8     <td>Lua       <td>26.9 <td>31.1 <td>73.4 <td>  6.8<td>999.9<td>  5.2<td>164.0</tr>
	<tr><th>Lua-5.1.4                   <td>Lua       <td>50.5 <td>68.3 <td>65.4 <td>  6.2<td>999.9<td>  5.7<td>197.6</tr>
	<tr><th>Perl-5.12.2                 <td>Perl      <td>999.9<td>230.3<td>225.6<td>  0.5<td> 12.6<td>  6.7<td>181.2</tr>
	<tr><th>PyPy-1.4.1                  <td>Python    <td>19.5 <td>8.5  <td>84.1 <td>  4.0<td>  7.3<td>  4.6<td>112.6</tr>
	<tr><th>CPython-3.2                 <td>Python    <td>119.9<td>121.9<td>93.2 <td>  5.7<td> 13.8<td>  5.8<td>154.1</tr>
	<tr><th>CPython-2.7.1               <td>Python    <td>113.9<td>153.9<td>91.3 <td>  5.5<td> 12.6<td>  4.6<td>112.6</tr>
	<tr><th>IronPython-2.7@Mono-2.10.1  <td>Python    <td>100.9<td>202.7<td>190.2<td> 21.9<td> 49.9<td> 13.7<td>188.6</tr>
	<tr><th>Jython-2.5.2@JRE-1.6.0_25   <td>Python    <td>136.3<td>731.4<td>355.6<td> 43.2<td>125.0<td> 13.4<td>444.2</tr>
	<tr><th>Shedskin-0.9@GCC-4.3.2      <td>Python    <td>4.4  <td>3.7  <td>50.4 <td>  1.1<td> 11.0<td>  6.9<td>331.1</tr>
	<tr><th>R-2.13.0                    <td>R         <td>999.9<td>1736.3<td>57.2<td> 34.6<td> 47.7<td>999.9<td>999.9</tr>
	<tr><th>JRuby-1.6.1@JRE-1.6.0_25    <td>Ruby      <td>71.1 <td>238.2<td>342.5<td>  5.5<td> 23.1<td> 18.1<td>436.9</tr>
	<tr><th>IronRuby-1.1.1@Mono-2.10.1  <td>Ruby      <td>249.3<td>510.0<td>176.0<td> 25.5<td> 54.5<td> 39.6<td>367.2</tr>
	<tr><th>Ruby-1.9.2p180              <td>Ruby      <td>98.0 <td>628.4<td>196.6<td> 15.4<td> 30.3<td>  8.6<td>156.8</tr>
	<tr><th>Rubinius-1.2.3              <td>Ruby      <td>135.5<td>298.1<td>162.5<td> 20.1<td> 33.8<td> 97.0<td>273.4</tr>
</table>
<br>
<h1>Notes</h1><br>
<table cellpadding="0" cellspacing="0" border="0" class="sortable">
<tr></tr>
<tr><th>General<td>
1) C programs are compiled with "gcc/clang -O3 -fomit-frame-pointer" or "icc -O3 -fomit-frame-pointer -xSSE4.1"<br>
2) D programs are compiled with "ldc -O3 -release" or "gdc -O3".<br>
3) Mono-sgen is used for implementations requiring the .NET framework. Mono-sgen is usually faster but costs more memory than mono.<br>
<tr><th>sudoku:t<td>
1) For these Sudokus, <a href="http://www.enjoysudoku.com/JSolve12.zip">JSolve</a> can find the solutions in 0.23 CPU seconds.<br/>
2) My <a href="https://github.com/attractivechaos/plb/blob/master/sudoku/sudoku_v1.js">Javascript implementation</a> is also available <a href="kudoku.html">here</a> as a web page.
<tr><th>matmul:t<br>matmul:m<td>
1) LDC, PyPy, CPython2/3 and IronPython use "matmul_v2.*" and the rest use "matmul_v1.*" in the source code directory.<br>
2) The built-in <a href="http://www.ruby-doc.org/stdlib/libdoc/matrix/rdoc/classes/Matrix.html">Matrix</a> class in Ruby does not transpose the second matrix before multiplication. Using the built-in class is twice as slow.<br>
3) Using the built-in matrix multiplication operator, R takes 2.7 sec in 57.0 MB memory, a huge difference.<br>
4) For LuaJIT, <a href="https://github.com/attractivechaos/plb/blob/master/matmul/matmul_v2.lua">matmut_v2.lua</a> uses FFI and is faster.
	To avoid potential dispute, the result of <a href="https://github.com/attractivechaos/plb/blob/master/matmul/matmul_v1.lua">matmut_v1.lua</a> is shown.
</tr>
<tr><th>patmch:1t<td>
1) <a href="http://people.unipmn.it/manzini/lightweight/corpus/howto.bz2">The file</a> used in the benchmark contains non-ASCII characters, which
	are removed by <a class="link" href="https://github.com/attractivechaos/plb/blob/master/ext/cleantxt.c">this program</a>.<br>
2) C uses "patmch_v2.*" and the rest use "patmch_v1.*" in the <a href="https://github.com/attractivechaos/plb/blob/master/patmch/">repository</a>.<br>
3) The <a href="https://github.com/attractivechaos/plb/blob/master/ext/">regexp9 library</a> from the <a href="http://swtch.com/plan9port/unix/">Plan 9</a>
	project is used for the <a href="https://github.com/attractivechaos/plb/blob/master/patmch/patmch_v2.c">C implementation</a>.
	<a href="http://lh3lh3.users.sourceforge.net/reb.shtml">Better libraries</a> exist in C++.<br>
4) I cannot get the <a href="https://github.com/attractivechaos/plb/blob/master/patmch/patmch_v1.d">D implementation</a> working.
	Rhino works for the <a href="https://github.com/attractivechaos/plb/blob/master/patmch/patmch_v1.js">Javascript program</a>, but run extremely slow.</br>
5) Shedskin failed for this benchmark.
</tr>
<tr><th>patmch:2t<td>1) Lua does not support the "|" regex operator.</tr>
<tr><th>dict:t<br>dict:m<td>
1) All language implementations use "dict_v1.*" in the <a href="https://github.com/attractivechaos/plb/blob/master/dict/">repository</a>.<br>
2) My <a href="https://github.com/attractivechaos/plb/blob/master/ext/khash.h">khash</a> library is used for the
	<a href="https://github.com/attractivechaos/plb/blob/master/dict/dict_v1.c">C implementation</a>.
	The <a href="https://github.com/attractivechaos/plb/blob/master/dict/dict_v1.cc">C++ implementation</a> takes 3.4 sec using 71.1MB memory.<br>
3) The C implementation manipulates the memory, which may be unfair to other implementations.
</tr>
</table>
</div>
<script type="text/javascript">
var sorter=new table.sorter("sorter");
sorter.init("sorter",1);
</script>
</body>
</html>
